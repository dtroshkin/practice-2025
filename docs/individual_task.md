# Реализация чат-приложения на C++ с использованием Qt Framework

## Выбранный проект
В рамках практической реализации технологии из репозитория [codecrafters-io/build-your-own-x](https://github.com/codecrafters-io/build-your-own-x) была выбрана тема "Build your own Chat App" - создание чат-приложения с клиент-серверной архитектурой.

## Технологический стек

- **Язык программирования:** C++
- **GUI фреймворк:** Qt 6.8
- **Сетевое взаимодействие:** Qt Network (QTcpSocket, QTcpServer)
- **База данных:** SQLite (через интерфейс Qt SQL)
- **Сборка проекта:** CMake
- **Тестирование:** Qt Test Framework
- **Документация:** Doxygen

## Архитектура приложения

### Серверная часть

Серверная часть реализована с использованием следующих компонентов:

1. **Класс Server** - основной класс сервера, отвечающий за:
    - Прослушивание TCP-соединений
    - Управление клиентскими сокетами
    - Обработку базовых событий (подключение/отключение клиентов)

2. **Класс CommandHandler** - обработчик команд:
    - Регистрация и аутентификация пользователей
    - Отправка и получение сообщений
    - Запрос истории сообщений
    - Получение списка онлайн-пользователей

3. **Класс Database** - интерфейс для работы с базой данных:
    - Хранение учетных записей пользователей
    - Сохранение истории сообщений
    - Получение данных для аналитики

### Клиентская часть

Клиентская часть состоит из следующих компонентов:

1. **Класс ApiService** - сетевой клиент:
    - Подключение к серверу
    - Отправка и получение JSON-сообщений
    - Обработка ответов сервера

2. **Класс ChatController** - контроллер бизнес-логики:
    - Управление соединением
    - Авторизация пользователя
    - Передача данных между UI и сетевым слоем

3. **Классы UI** (LoginWindow, Dialog):
    - Графический интерфейс для взаимодействия с пользователем
    - Отображение сообщений и списка пользователей
    - Форма ввода и отправки сообщений

4. **Вспомогательные классы**:
    - MessageFormatter - форматирование сообщений (Markdown-подобный синтаксис)
    - EmojiConverter - конвертация текстовых эмодзи в Unicode-символы

## Протокол взаимодействия

Клиент и сервер обмениваются сообщениями в формате JSON. Основные типы сообщений:

### Команды от клиента к серверу:

```json
{
  "command": "login",
  "username": "user123",
  "password": "password123"
}
```

```json
{
  "command": "send_message",
  "message": "Привет, мир!"
}
```

### Ответы от сервера клиенту:

```json
{
  "status": "ok",
  "message": "success login"
}
```

```json
{
  "type": "message",
  "sender": "user123",
  "content": "Привет, мир!",
  "timestamp": "2025-05-10T15:30:00Z"
}
```

## Этапы разработки

### 1. Исследование и проектирование (10-15 апреля)
- Анализ существующих решений
- Проектирование архитектуры приложения
- Составление документации

### 2. Разработка серверной части (16-20 апреля)
- Настройка сетевого взаимодействия
- Разработка системы обработки команд
- Реализация работы с базой данных

### 3. Разработка клиентской части (21-30 апреля)
- Создание сетевого клиента
- Разработка интерфейса пользователя
- Реализация бизнес-логики

### 4. Тестирование и отладка (1-10 мая)
- Написание модульных тестов
- Интеграционное тестирование
- Отладка обнаруженных проблем

### 5. Документирование (11-13 мая)
- Создание пользовательской документации
- Автоматическая генерация документации исходного кода
- Подготовка демонстрационных материалов

## Функциональные возможности

### Сервер
- Регистрация новых пользователей
- Аутентификация существующих пользователей
- Пересылка сообщений между клиентами
- Хранение истории сообщений
- Отслеживание онлайн-статуса пользователей

### Клиент
- Подключение к серверу по IP-адресу и порту
- Регистрация и авторизация
- Отправка и получение сообщений
- Просмотр истории сообщений
- Просмотр списка онлайн-пользователей
- Форматирование сообщений (поддержка Markdown-подобного синтаксиса)
- Поддержка эмодзи

## Модификации и улучшения

В рамках творческого подхода к проекту были реализованы следующие улучшения:

1. **Формат сообщений с Markdown-подобным синтаксисом:**
    - Поддержка **жирного** текста с помощью двойных звездочек
    - Поддержка *курсивного* текста с помощью одинарных звездочек
    - Автоматическая замена текстовых эмодзи на Unicode-символы

2. **Архитектурные улучшения:**
    - Внедрение паттерна "Model-View-Controller" для разделения логики
    - Использование паттерна "Singleton" для сервисов соединения
    - Использование паттерна "Command" для обработки сообщений на сервере

3. **Безопасность:**
    - Проверка наличия повторных запусков клиента
    - Защита от SQL-инъекций через параметризованные запросы

## Заключение

Реализованное чат-приложение представляет собой полноценное решение для обмена сообщениями с клиент-серверной архитектурой. В ходе разработки были изучены основы сетевого программирования, проектирования пользовательских интерфейсов и работы с базами данных в контексте C++ и Qt Framework.

Проект может быть расширен дополнительными функциями, такими как поддержка приватных сообщений, создание групповых чатов, отправка файлов и другими возможностями, характерными для современных мессенджеров.
